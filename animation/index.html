<!DOCTYPE html>
<html lang="en" dir="ltr" id="modernizrcom" class="no-js">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<link type="text/css" media="all" href="./3yfejk2clwu33spmwz2ehh1f-wpengine.netdna-ssl.com/wp-content/cache/autoptimize/css/autoptimize_ed98043ff0deeda7c6d7b97e96d61733.css" rel="stylesheet" /><title>noformat | strategic design agency | app &amp; web development</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="./3yfejk2clwu33spmwz2ehh1f-wpengine.netdna-ssl.com/wp-content/themes/noformat/assets/ico/apple-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="./3yfejk2clwu33spmwz2ehh1f-wpengine.netdna-ssl.com/wp-content/themes/noformat/assets/ico/apple-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="./3yfejk2clwu33spmwz2ehh1f-wpengine.netdna-ssl.com/wp-content/themes/noformat/assets/ico/apple-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="./3yfejk2clwu33spmwz2ehh1f-wpengine.netdna-ssl.com/wp-content/themes/noformat/assets/ico/apple-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="./3yfejk2clwu33spmwz2ehh1f-wpengine.netdna-ssl.com/wp-content/themes/noformat/assets/ico/apple-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="./3yfejk2clwu33spmwz2ehh1f-wpengine.netdna-ssl.com/wp-content/themes/noformat/assets/ico/apple-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="./3yfejk2clwu33spmwz2ehh1f-wpengine.netdna-ssl.com/wp-content/themes/noformat/assets/ico/apple-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="./3yfejk2clwu33spmwz2ehh1f-wpengine.netdna-ssl.com/wp-content/themes/noformat/assets/ico/apple-icon-152x152.png" />
    <link rel="icon" type="image/png" href="./3yfejk2clwu33spmwz2ehh1f-wpengine.netdna-ssl.com/wp-content/themes/noformat/assets/ico/favicon-192x192.png" sizes="192x192" />
    <link rel="icon" type="image/png" href="./3yfejk2clwu33spmwz2ehh1f-wpengine.netdna-ssl.com/wp-content/themes/noformat/assets/ico/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="./3yfejk2clwu33spmwz2ehh1f-wpengine.netdna-ssl.com/wp-content/themes/noformat/assets/ico/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="./3yfejk2clwu33spmwz2ehh1f-wpengine.netdna-ssl.com/wp-content/themes/noformat/assets/ico/favicon-16x16.png" sizes="16x16" />
    <meta name="msapplication-TileImage" content="./noformat.com/wp-content/themes/noformat/assets/ico/ms-icon-144x144.png" />
    <meta name="msapplication-square70x70logo" content="./noformat.com/wp-content/themes/noformat/assets/ico/ms-icon-70x70.png" />
    <meta name="msapplication-square150x150logo" content="./noformat.com/wp-content/themes/noformat/assets/ico/ms-icon-150x150" />
    <meta name="msapplication-wide310x150logo" content="./noformat.com/wp-content/themes/noformat/assets/ico/ms-icon-310x310.png" />
    <meta name="msapplication-square310x310logo" content="./noformat.com/wp-content/themes/noformat/assets/ico/ms-icon-310x310.png" />

    <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="./noformat.com/feed/" />
    <link rel="alternate" type="text/xml" title="RSS .92" href="./noformat.com/feed/rss/" />
    <link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="./noformat.com/feed/atom/" />
    <link rel="pingback" href="./noformat.com/xmlrpc.php" />
	
<!-- This site is optimized with the Yoast SEO plugin v7.6.1 - ./yoast.com/wordpress/plugins/seo/ -->
<meta name="description" content="Noformat is a strategic design agency based in New York City. We design and build websites, apps, brand identities, marketing campaigns, go-to-market strategies, social media content and more. We take great pride in our work, and always go the extra mile."/>
<link rel="canonical" href="./noformat.com/" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="website" />
<meta property="og:title" content="noformat | strategic design agency | app &amp; web development" />
<meta property="og:description" content="We are strategists, designers, developers, inventors, artists, and storytellers. Above all, weâ€™re problem solvers who love what we do." />
<meta property="og:url" content="./noformat.com/" />
<meta property="og:site_name" content="noformat | strategic design agency | app &amp; web development" />
<meta property="og:image" content="./noformat.com/wp-content/uploads/2018/10/nf_share_image_eye.jpg" />
<meta property="og:image:secure_url" content="./noformat.com/wp-content/uploads/2018/10/nf_share_image_eye.jpg" />
<meta property="og:image:width" content="1920" />
<meta property="og:image:height" content="1080" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="Noformat is a strategic design agency based in New York City. We design and build websites, apps, brand identities, marketing campaigns, go-to-market strategies, social media content and more. We take great pride in our work, and always go the extra mile." />
<meta name="twitter:title" content="noformat | strategic design agency | app &amp; web development" />
<meta name="twitter:site" content="@wearenoformat" />
<meta name="twitter:image" content="./noformat.com/wp-content/uploads/2018/10/nf_share_image_eye.jpg" />
<script type='application/ld+json'>{"@context":"https:\/\/schema.org","@type":"WebSite","@id":"#website","url":"https:\/\/noformat.com\/","name":"noformat | strategic design agency | app &amp; web development","potentialAction":{"@type":"SearchAction","target":"https:\/\/noformat.com\/?s={search_term_string}","query-input":"required name=search_term_string"}}</script>
<script type='application/ld+json'>{"@context":"https:\/\/schema.org","@type":"Organization","url":"https:\/\/noformat.com\/","sameAs":["https:\/\/www.facebook.com\/wearenoformat\/","https:\/\/www.instagram.com\/wearenoformat\/","https:\/\/twitter.com\/wearenoformat"],"@id":"https:\/\/noformat.com\/#organization","name":"noformat","logo":"https:\/\/noformat.com\/wp-content\/uploads\/2017\/03\/14596889_1761286967465149_6479650523334049792_a.jpg"}</script>
<!-- / Yoast SEO plugin. -->

<link rel='dns-prefetch' href='//s.w.org' />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.4\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.4\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/noformat.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.6"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55357,56692,8205,9792,65039],[55357,56692,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		


<link rel='./api.w.org/' href='./noformat.com/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="./noformat.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="./noformat.com/wp-includes/wlwmanifest.xml" /> 
		
		
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','./www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-39116216-1', 'auto');
      ga('send', 'pageview');
    </script>

    <script>
        var themeUrl = './noformat.com/wp-content/themes/noformat';
    </script>
    
    <script type="text/javascript">
        setTimeout(function(){var a=document.createElement("script");
        var b=document.getElementsByTagName("script")[0];
        a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0064/4904.js?"+Math.floor(new Date().getTime()/3600000);
        a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
    </script>
    
    <script type="text/javascript">
        window.smartlook||(function(d) {
        var o=smartlook=function(){ o.api.push(arguments)},h=d.getElementsByTagName('head')[0];
        var c=d.createElement('script');o.api=new Array();c.async=true;c.type='text/javascript';
        c.charset='utf-8';c.src='//rec.smartlook.com/recorder.js';h.appendChild(c);
        })(document);
        smartlook('init', 'a661359320a16121bb817fd5095e9c799e458be6');
    </script>
</head>

<body data-rsssl=1 class="home blog">
   
    <div class="first-time-overlay"></div>

    <div class="landscape-message"></div>

    <header class="initial clearfix light">
     </header>

    <div class="nav-overlay"></div>
<div id="main" class="home">

    <div class="sections-holder home-sections-holder">
        <section class="section intro active" data-color-scheme="dark" data-bg-color="#000000" data-progress-color="#ffffff">
            <div class="media-holder">
                <div id="outer-eye"></div>
                <div id="inner-eye"></div>                    
            </div>
             <span class="mouse initial"><span></span></span>
        </section>
        <section class="section happy-moves case-study" data-color-scheme="dark" data-bg-color="#1a1a1a" data-progress-color="#ffffff">
            <div class="media-holder">
                <span></span>
            </div>
            <div class="parallax">
                <div class="layer one always-bottom" data-depth="0.10" data-width="112" data-height="164" data-left="864" data-top="327" data-portrait-width="0" data-portrait-height="0" data-portrait-left="-2000" data-portrait-top="233"><span></span></div>
                <div class="layer four always-bottom" data-depth="0.15" data-width="176" data-height="331" data-left="1455" data-top="620" data-portrait-width="176" data-portrait-height="331" data-portrait-left="156" data-portrait-top="170"><span></span></div>
                <div class="layer six" data-depth="0.30" data-width="778" data-height="936" data-left="912" data-top="210" data-portrait-width="605" data-portrait-height="728" data-portrait-left="150" data-portrait-top="290"><span></span></div>
            </div>
        </section>
         <section class="section pls-pls-me case-study" data-color-scheme="dark" data-bg-color="#bb9b6d" data-progress-color="#ffffff">
            <div class="media-holder">
                <span></span>
            </div>
            <div class="parallax">
                <div class="layer one" data-depth="0.05" data-width="113" data-height="113" data-left="240" data-top="303" data-portrait-width="113" data-portrait-height="113" data-portrait-left="-60" data-portrait-top="453"><span></span></div>
                <div class="layer two" data-depth="0.10" data-width="431" data-height="470" data-left="970" data-top="240" data-portrait-width="350" data-portrait-height="382" data-portrait-left="162" data-portrait-top="62"><span></span></div>
                <div class="layer three" data-depth="0.25" data-width="334" data-height="417" data-left="1250" data-top="455" data-portrait-width="280" data-portrait-height="350" data-portrait-left="370" data-portrait-top="230"><span></span></div>
                <div class="layer four" data-depth="0.3" data-width="51" data-height="52" data-left="516" data-top="956" data-portrait-width="51" data-portrait-height="52" data-portrait-left="216" data-portrait-top="956"><span></span></div>
                <div class="layer five" data-depth="0.10" data-width="43" data-height="43" data-left="840" data-top="820" data-portrait-width="43" data-portrait-height="43" data-portrait-left="310" data-portrait-top="520"><span></span></div>
            </div>
         </section>
         <section class="section assemblage case-study" data-color-scheme="dark" data-bg-color="#515d59">
            <div class="media-holder">
                <span></span>
            </div>
            <div class="parallax">
                <div class="layer one" data-depth="0.10" data-width="135" data-height="88" data-left="950" data-top="850" data-portrait-width="110" data-portrait-height="72" data-portrait-left="260" data-portrait-top="780"><span></span></div>
                <div class="layer two" data-depth="0.07" data-width="208" data-height="190" data-left="1800" data-top="326" data-portrait-width="175" data-portrait-height="160" data-portrait-left="600" data-portrait-top="360"><span></span></div>
                <div class="layer three" data-depth="0.05" data-width="583" data-height="573" data-left="1600" data-top="680" data-portrait-width="475" data-portrait-height="467" data-portrait-left="400" data-portrait-top="820"><span></span></div>
                <div class="layer four" data-depth="0.10" data-width="424" data-height="166" data-left="1150" data-top="240" data-portrait-width="335" data-portrait-height="161" data-portrait-left="100" data-portrait-top="120"><span></span></div>
                <div class="layer five" data-depth="0.07" data-width="231" data-height="244" data-left="1174" data-top="350" data-portrait-width="193" data-portrait-height="204" data-portrait-left="250" data-portrait-top="360"><span></span></div>
                
                            </div>
         </section>
     </div>

    <ul class="sections-nav initial light"></ul>

</div>

























<script type="x-shader/x-vertex" id="eyeVertexShader">
        
        varying vec3 oPosition;  
        varying vec3 oNormal;    
        varying vec3 oView;      
        
        varying vec3 mPosition;  
        varying vec3 mNormal;    
        varying vec3 mView;      
        
        varying vec3 vPosition;  
        varying vec3 vNormal;    

        uniform float iris_size;        
        uniform float cornea_bump_amount;
        uniform float cornea_bump_radius_mult;
    
        mat4 InverseMatrix(mat4 A) {
        
            float s0 = A[0][0] * A[1][1] - A[1][0] * A[0][1];
            float s1 = A[0][0] * A[1][2] - A[1][0] * A[0][2];
            float s2 = A[0][0] * A[1][3] - A[1][0] * A[0][3];
            float s3 = A[0][1] * A[1][2] - A[1][1] * A[0][2];
            float s4 = A[0][1] * A[1][3] - A[1][1] * A[0][3];
            float s5 = A[0][2] * A[1][3] - A[1][2] * A[0][3];
         
            float c5 = A[2][2] * A[3][3] - A[3][2] * A[2][3];
            float c4 = A[2][1] * A[3][3] - A[3][1] * A[2][3];
            float c3 = A[2][1] * A[3][2] - A[3][1] * A[2][2];
            float c2 = A[2][0] * A[3][3] - A[3][0] * A[2][3];
            float c1 = A[2][0] * A[3][2] - A[3][0] * A[2][2];
            float c0 = A[2][0] * A[3][1] - A[3][0] * A[2][1];
         
            float invdet = 1.0 / (s0 * c5 - s1 * c4 + s2 * c3 + s3 * c2 - s4 * c1 + s5 * c0);
         
            mat4 B;
         
            B[0][0] = ( A[1][1] * c5 - A[1][2] * c4 + A[1][3] * c3) * invdet;
            B[0][1] = (-A[0][1] * c5 + A[0][2] * c4 - A[0][3] * c3) * invdet;
            B[0][2] = ( A[3][1] * s5 - A[3][2] * s4 + A[3][3] * s3) * invdet;
            B[0][3] = (-A[2][1] * s5 + A[2][2] * s4 - A[2][3] * s3) * invdet;
         
            B[1][0] = (-A[1][0] * c5 + A[1][2] * c2 - A[1][3] * c1) * invdet;
            B[1][1] = ( A[0][0] * c5 - A[0][2] * c2 + A[0][3] * c1) * invdet;
            B[1][2] = (-A[3][0] * s5 + A[3][2] * s2 - A[3][3] * s1) * invdet;
            B[1][3] = ( A[2][0] * s5 - A[2][2] * s2 + A[2][3] * s1) * invdet;
         
            B[2][0] = ( A[1][0] * c4 - A[1][1] * c2 + A[1][3] * c0) * invdet;
            B[2][1] = (-A[0][0] * c4 + A[0][1] * c2 - A[0][3] * c0) * invdet;
            B[2][2] = ( A[3][0] * s4 - A[3][1] * s2 + A[3][3] * s0) * invdet;
            B[2][3] = (-A[2][0] * s4 + A[2][1] * s2 - A[2][3] * s0) * invdet;
         
            B[3][0] = (-A[1][0] * c3 + A[1][1] * c1 - A[1][2] * c0) * invdet;
            B[3][1] = ( A[0][0] * c3 - A[0][1] * c1 + A[0][2] * c0) * invdet;
            B[3][2] = (-A[3][0] * s3 + A[3][1] * s1 - A[3][2] * s0) * invdet;
            B[3][3] = ( A[2][0] * s3 - A[2][1] * s1 + A[2][2] * s0) * invdet;
         
            return B;
        }

        mat3 makeRotationDir( vec3 direction, vec3 up )
        {
             vec3 xaxis = normalize( cross( up, direction));
             vec3 yaxis = normalize( cross( direction, xaxis));

            return mat3( xaxis.x, xaxis.y, xaxis.z,
                         yaxis.x, yaxis.y, yaxis.z,
                         direction.x, direction.y, direction.z);
        }
        
        mat3 rotationMatrix(vec3 axis, float angle)
        {
            axis = normalize(axis);
            float s = sin(angle);
            float c = cos(angle);
            float oc = 1.0 - c;
            
            return mat3(oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s, oc * axis.z * axis.x + axis.y * s,
                        oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s,
                        oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s, oc * axis.z * axis.z + c);
        }

        vec3 corneaVertexDisp
        (
            vec3 eyeP,
            vec3 eyeN,
            float iris_size,
            float cornea_bump_amount,
            float cornea_bump_radius_mult,
            out vec3 outN
        )
        {
            vec3 _norm_P = normalize( eyeP );
            float iris_depth = 1.0 - pow(  iris_size, 3.0 );
            float _measured_eye_radius = length( eyeP );
            float _iris_rad = sqrt( max( 0.0, 1.0 - iris_depth * iris_depth ) );
            float _bump_t = 1.0;
            if( _norm_P[2] > 0.0 )
            {
                _bump_t = min( 1.0, sqrt( max( 0.0, 1.0 - _norm_P[2] * _norm_P[2] ) ) / (
                        _iris_rad * cornea_bump_radius_mult ) );
            }
            float _bump_factor = pow( 1.0 - pow( _bump_t, 2.5 ), 1.0 ); 
            _bump_factor *= cornea_bump_amount * _iris_rad * _measured_eye_radius;
            
            float NzMask = 1.0 - (_bump_factor * (1.0-eyeN.z) * 2.5);               
            outN =  normalize( vec3( eyeN.xy, eyeN.z * NzMask));
            
            return _bump_factor * eyeN;
        }
        
        void main() {

            vec3 displacedN;
            vec3 displacedP = position.xyz + corneaVertexDisp( position.xyz, normal, iris_size, cornea_bump_amount, cornea_bump_radius_mult, displacedN );      
                        
            oPosition = vec3( modelMatrix * vec4( displacedP, 1.0 ));
            oNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * displacedN );
            oView = normalize( oPosition - cameraPosition );

            mPosition = displacedP;
            mNormal = displacedN;
             
            mat4 myModelViewMatrixInverse = InverseMatrix( modelViewMatrix );
            mView = normalize( mPosition - myModelViewMatrixInverse[3].xyz );
                                
            vPosition = vec3( modelViewMatrix * vec4( displacedP, 1.0 ));
            vNormal = normalize( normalMatrix * displacedN );
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( displacedP, 1.0 );
            
        }   
    </script>
     
    <script type="x-shader/x-vertex" id="eyeFragmentShader">

        varying vec3 oPosition;
        varying vec3 oNormal;
        varying vec3 oView;
        
        varying vec3 mPosition;
        varying vec3 mNormal;
        varying vec3 mView;
        
        varying vec3 vPosition;
        varying vec3 vNormal;
        
        uniform mat3 normalMatrix;
        uniform mat4 modelMatrix;
        
        uniform sampler2D texEyeCol;        
        uniform sampler2D texEyeNrm;
        uniform sampler2D texEnvRfl;
        uniform sampler2D texEnvDif;
        uniform sampler2D texEnvRfr;
        
        uniform float pupil_size;
        uniform float iris_tex_start;
        uniform float iris_tex_end;
        uniform float iris_border;
        uniform float iris_size;
        uniform float iris_edge_fade;
        uniform float iris_inset_depth;
        uniform float sclera_tex_scale;
        uniform float sclera_tex_offset;
        uniform float ior;
        uniform float refract_edge_softness;

        uniform float iris_texture_curvature;
        uniform float arg_iris_shading_curvature;

        uniform float tex_U_offset;
        uniform float iris_normal_offset;
        uniform float cornea_density;
        uniform float bump_texture;
        uniform float alpha_intensity;
        uniform int   catshape;
        uniform int   outer;
        uniform float cybshape;
        uniform int   col_texture;
        
        #define PI 3.14159265358979323846264
        
        float intersectSphere
        (
            vec3 ray_origin,
            vec3 ray_dir,
            vec3 sphere_center,
            float sphere_rad,
            float trace_dir
        )
        {
            vec3 disp = ray_origin - sphere_center;
            float B = dot(disp, ray_dir);
            float C = dot(disp, disp) - sphere_rad * sphere_rad;
            float D = B*B - C;
            return D > 0.0 ? -B + trace_dir * sqrt(D) : -1.0;
        }

        #extension GL_OES_standard_derivatives : enable
        
        vec3 normalMapComp
        (  
            sampler2D normalMap, 
            vec2 inUV, 
            vec3 eye_pos, 
            vec3 surf_norm,
            float normalScale
        ) 
        {
            vec3 q0 = dFdx( eye_pos.xyz );
            vec3 q1 = dFdy( eye_pos.xyz );
            vec2 st0 = dFdx( inUV.st );
            vec2 st1 = dFdy( inUV.st );

            vec3 S = normalize(  q0 * st1.t - q1 * st0.t );
            vec3 T = normalize( -q0 * st1.s + q1 * st0.s );
            vec3 N = normalize( surf_norm );

            vec3 mapN = texture2D( normalMap, inUV ).xyz * 2.0 - 1.0;
            mapN.xy = normalScale * mapN.xy;
            mat3 tsn = mat3( S, T, N );
            return normalize( tsn * mapN );
        }
        
        vec3 sphericalRefl( sampler2D panoTex, vec3 vReflect)
        {
            float yaw = .5 + atan( vReflect.z, vReflect.x ) / ( 2.0 * PI );
            float pitch = .5 + atan( vReflect.y, length( vReflect.xz ) ) / ( PI );
            return texture2D( panoTex, vec2( yaw, pitch ) ).rgb;
        }
        void main()
        {
            float cornea_mask = 0.0;
            float pupil_mask = 0.0;
            float cornea_fade;
            float cornea_alpha = 1.0;
            vec3 iris_normal;
            vec3 cornea_normal;
            float eye_U;
            float eye_V;
            float iris_U = 0.0;
            float iris_V = 0.0;
            
            float iris_depth = 1.0 - pow( iris_size, 3.0 );
            float iris_shading_curvature = arg_iris_shading_curvature;
            vec3 _norm_P = normalize( mPosition );
            float _measured_eye_radius = length( mPosition );
            vec3 _major_axis = vec3( 0.0, 0.0, 1.0 );
            float _slice = _norm_P.z - iris_depth;
            float _iris_rad = sqrt( max( 0.0, 1.0 - iris_depth * iris_depth ) );
            vec3 _refract_N;
            cornea_normal = mNormal;
            _refract_N = cornea_normal;
            vec3 _refract_vec;
            vec3 ballCtr = vec3( 0.0, 0.0, 0.0 );
            vec3 _pupil_center = ballCtr + iris_depth * _major_axis;
            float _border_scale = 0.5;
            
            float _cur_refract_edge_softness = max( 0.000001, refract_edge_softness * 0.25);
            iris_normal = mNormal;
            float _cornea_mask_for_normals = 0.0;
            vec3 _iris_point = _norm_P;
            if( _slice >= 0.0 ) {
                cornea_alpha = 0.0;
                float _graded_eta = 1.0 / ior;
                float _pupil_depth = iris_depth;
                float _pupil_center_depth = iris_depth;

                _refract_vec = refract( mView, _refract_N, _graded_eta );
                float _final_iris_size = 1.0 / ( 1.0 + iris_border );
                float _final_pupil_size = pupil_size  * _final_iris_size;
                float _final_pupil_rad = _final_pupil_size * _iris_rad;

                if( dot( _refract_vec, _refract_vec ) > 0.0 ) {
                    float _iris_scale = 1.0 / max( 0.0001, _iris_rad );
                    float _refract_edge_angle_boost = min(20.0, 1.0 / abs( mView.z ) );
                    if( iris_shading_curvature > 0.0) _refract_edge_angle_boost = 1.0;
                    float _iris_T_shading = -1.0;
                    {
                        float _shading_curvature_dir = sign( iris_shading_curvature );

                        float _shading_curve_radius = abs( 1.0 / iris_shading_curvature );
                        vec3 _shading_curve_center = vec3( 0, 0, iris_depth + _shading_curvature_dir *
                            sqrt( _shading_curve_radius * _shading_curve_radius - _iris_rad * _iris_rad ) );

                        _iris_T_shading = intersectSphere( _norm_P, _refract_vec,
                            _shading_curve_center, _shading_curve_radius, _shading_curvature_dir );

                        float ray_dist_from_center = length( cross( _shading_curve_center - _norm_P,
                            _shading_curve_center - _norm_P -_refract_vec ) );
                        cornea_alpha = 1.0 - smoothstep( _shading_curve_radius -
                            _cur_refract_edge_softness * 0.5, _shading_curve_radius, ray_dist_from_center );

                        _iris_point = _norm_P + _iris_T_shading * _refract_vec;
                        iris_normal = -_shading_curvature_dir * normalize( _iris_point - _shading_curve_center );
                    }
                    float _iris_T_texture = -1.0;
                    if ( iris_texture_curvature == iris_shading_curvature )
                    {
                    _iris_T_texture = _iris_T_shading;
                    }
                    else
                    {
                        float _texture_curvature_dir = sign( iris_texture_curvature );

                        float _texture_curve_radius = abs( 1.0 / iris_texture_curvature );
                        vec3 _texture_curve_center = vec3( 0, 0, iris_depth + _texture_curvature_dir *
                            sqrt( _texture_curve_radius * _texture_curve_radius - _iris_rad * _iris_rad ) );

                        _iris_T_texture = intersectSphere( _norm_P, _refract_vec,
                            _texture_curve_center, _texture_curve_radius, _texture_curvature_dir );
                    }
                    if( _iris_T_shading >= -0.0001 )
                    {
                        vec3 _fade_P = (_norm_P + _iris_T_shading * _refract_vec) * _iris_scale;
                        cornea_alpha = min( cornea_alpha,
                            smoothstep( -_cur_refract_edge_softness * _refract_edge_angle_boost, 0.0, 1.0 -
                                sqrt( _fade_P.x * _fade_P.x + _fade_P.y * _fade_P.y ) ) );
                    }
                    else
                    {
                        cornea_alpha = 0.0;
                    }

                    if( _iris_T_texture >= -0.0001 && _iris_T_shading >= -0.0001)
                    {
                        float _fade_T = _iris_T_shading * cornea_density;
                        cornea_fade = clamp( _fade_T * _fade_T, 0.0, 1.0 );
                        vec3 _iris_point_for_st = _norm_P + _iris_T_texture * _refract_vec;
                        vec3 _iris_ST = ( _iris_scale * _iris_point_for_st );
                        vec3 _iris_ST_orient = vec3( _iris_ST.xy, 0);
                        float _theta = ( atan( _iris_ST_orient.x, _iris_ST_orient.y ) / PI + 1.0 ) * 0.5;
                        float _r = 0.0;
                        if( catshape == 1 )
                        {
                            float cateyeShift = 0.3;
                            _final_pupil_size = _final_pupil_size * ( 1.0 + cateyeShift );
                            _r =  sqrt( pow( pow( _iris_ST.x, 0.7), 2.0 ) + pow( _iris_ST.y * ( _final_pupil_size + cateyeShift ), 2.0 ));
                        }else{
                            _r = length( _iris_ST_orient );
                        }
                        
                        if( _r <= 1.0 + _cur_refract_edge_softness * _refract_edge_angle_boost )
                        {
                            float _iris_pos = (_r - _final_pupil_size) / (_final_iris_size - _final_pupil_size);
                            if( _r > _final_iris_size )
                            {
                                 _iris_pos = 1.0 + (_r * (1.0 + iris_border) - 1.0) * _border_scale;
                            }
                            pupil_mask = ( 1.0 - step( -_iris_pos, 0.0 ) ) * cornea_alpha;
                            iris_U = _theta + tex_U_offset;
                            iris_V = mix( iris_tex_start, iris_tex_end, _iris_pos );        
                            if( _r < _final_pupil_size )
                            {
                                iris_V = _r / _final_pupil_size * iris_tex_start;
                            }
                        }
                    }
                    cornea_mask = smoothstep( iris_inset_depth, iris_edge_fade + iris_inset_depth, _slice );
                    _cornea_mask_for_normals = smoothstep( iris_inset_depth,
                    iris_edge_fade + iris_inset_depth, _slice - iris_normal_offset );
                }
            }
            iris_normal = mix( mNormal, iris_normal, _cornea_mask_for_normals );
            eye_U = ( atan( _norm_P.x, _norm_P.y  ) / PI + 1.0 ) * 0.5 + tex_U_offset;
            float _iris_edge_V = mix( iris_tex_start, iris_tex_end, 1.0 + iris_border * _border_scale);
            eye_V = mix( _iris_edge_V, sclera_tex_scale, _slice - sclera_tex_offset );
            
            vec2 eyeUVs = mix( vec2( eye_U, eye_V ), vec2( iris_U, iris_V ), cornea_mask);  
            
            vec3 fNormalSpec = normalMapComp( texEyeNrm, vec2( eye_U, eye_V ), -vPosition, oNormal, -bump_texture * (1.0-cornea_mask) );
            vec3 oReflect = normalize( reflect( oView, fNormalSpec ) );
            vec3 envTex = sphericalRefl( texEnvRfl, oReflect );     

            vec3 cybTex = vec3(0.0);
            cybTex = vec3( sphericalRefl( texEnvRfr, _refract_vec ).x * pupil_mask * 2.0, 0, 0);
            cybTex = pow(cybTex, vec3(2.2)) * vec3(cybshape);
            envTex *= mix( vec3(1.0), mix( vec3(0.8), vec3( 0.7, 0.2, 1.0 ), cornea_mask), cybshape );

            const float fresBias = 0.002;
            const float fresScale = 0.5;
            const float fresPow = 6.0;
            float fresnel = fresBias + fresScale * pow( 1.0 + dot( oView, fNormalSpec ), fresPow );     
            
            vec3 eyeTexIris = vec3( 0.8 ); 
            vec3 eyeTexSclera = vec3( 0.8 );
            if( col_texture == 1 ){
                eyeTexIris = texture2D( texEyeCol, vec2( iris_U, iris_V ) ).rgb  * (1.0 - pupil_mask); 
                eyeTexSclera = texture2D( texEyeCol, vec2( eye_U, eye_V ) ).rgb;    
            }
            vec3 eyeTex = mix( eyeTexSclera, eyeTexIris, cornea_mask );     

            eyeTex = pow(eyeTex, vec3(2.2));
            envTex = pow(envTex, vec3(2.2));
            envTex = envTex * 10.0;  envTex = pow(envTex, vec3(1.6));

            vec3 composites = vec3(1.0);
            vec3 fNormalDiff = mNormal;

            if( 0 == 1 ){
                fNormalDiff = normalMapComp( texEyeNrm, eyeUVs, -vPosition, normalize( normalMatrix * iris_normal ),  -bump_texture * mix( 0.5, 1.0, cornea_mask) );
                fNormalSpec = vec3( viewMatrix * vec4( fNormalSpec, 0.0 ));
                
                vec3 directionalLightDirection = vec3( -1.0, 1.75, 1.0 );               
                vec3 dirLgtVector = normalize( vec3( viewMatrix * vec4( directionalLightDirection, 0.0 )));
                float diffuse = max( dot( fNormalDiff, dirLgtVector ), 0.0 ) * 0.6;
                vec3 dirHalfVector = normalize( dirLgtVector + normalize( -vPosition ) );
                float dirDotNormalHalf = max( dot( fNormalSpec, dirHalfVector ), 0.0 );
                float specular = max( pow( dirDotNormalHalf, 1000.0 ), 0.0 ) * 5.0;
                
                vec3 hemiLightDirection = vec3( 0.0, 1.0, 0.0 );                
                vec3 hemiLgtVector = normalize( vec3( viewMatrix * vec4( hemiLightDirection, 0.0 )));   
                float hemiDiffuseWeight = 0.5 * dot( fNormalDiff, hemiLgtVector ) + 0.5;
                vec3  hemiCol = mix( vec3( 0.08, 0.03, 0.002 ), vec3( 0.15, 0.2, 0.25 ), hemiDiffuseWeight);
                
                composites = mix( eyeTex * (diffuse + hemiCol), envTex, fresnel )   + specular;
            }else{
                fNormalDiff = normalMapComp( texEyeNrm, eyeUVs, -vPosition, normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * iris_normal ),  -bump_texture * mix( 0.5, 1.0, cornea_mask) );
                vec3 sphericalDiff = sphericalRefl( texEnvDif,  fNormalDiff  ) * 1.3;
                vec3 sphericalDiffCatarax = pow( sphericalRefl( texEnvDif,  oNormal  ), vec3(2.0)) * vec3( 0.8, 0.79, 0.77);
                sphericalDiff = pow( sphericalDiff, vec3(2.0)) * 1.5;

                composites = mix( eyeTex * sphericalDiff, sphericalDiffCatarax, cornea_fade * 10.0 * cornea_mask) + cybTex;
                composites = composites * ( 1.0 - fresnel ) + ( envTex * fresnel );
            }

            composites =  pow( composites, vec3(1.0 / 2.2));

            if (outer == 1) {
                float intensity = pow( -0.1 - dot( mNormal, vec3( 0.0, 0.0, 1.0 ) ), 4.0 ); 
                float alpha = 0.8;
                if (intensity < 0.24) { alpha = 0.0; } 
                else { alpha = 0.5; }
                if (composites.x < 0.05 && intensity > 0.95) { alpha = 0.0; }            
                gl_FragColor = vec4(composites, alpha);
            } else {
                float intensity = pow( -0.1 - dot( mNormal, vec3( 0.0, 0.0, 1.0 ) ), 4.0 ); 
                float alpha = 1.0;
                alpha = intensity - alpha_intensity;
                if (composites.x < 0.05 && intensity > 1.2) { alpha = 0.0; }
                gl_FragColor = vec4(composites, alpha) * intensity;
            }

        }
    </script> 

    <script type="x-shader/x-vertex" id="blackMaskVertexShader">
        varying vec3 vNormal;
        void main() {
            vNormal = normalize( normalMatrix * normal );
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
    </script>

    <script type="x-shader/x-vertex" id="blackMaskFragmentShader"> 
        varying vec3 vNormal;
        void main() {
            float intensity = pow( 0.0 - dot( vNormal, vec3( 0.0, 0.0, 1.0 ) ), 4.0 ); 
            float alpha = 1.0;
            gl_FragColor = vec4( 0.0, 0.0, 0.0, alpha ) * intensity;
        }
    </script>  
    
<script type="text/javascript" defer src="./3yfejk2clwu33spmwz2ehh1f-wpengine.netdna-ssl.com/wp-content/cache/autoptimize/js/autoptimize_b5b7d720be404961b8f0cff149f09939.js"></script></body>
</html>